# üìú How to Exploit with CookieFarm

## ‚úçÔ∏è Writing Your Exploit

To write your exploit, use the `exploit_manager` decorator, which will **automatically handle attacking multiple teams**.

Your exploit should follow this structure:

```python
#!/usr/bin/env python3

from utils.exploiter_manager import exploit_manager
import requests

@exploit_manager
def exploit(ip: str, port: int):
    r = requests.get(f"http://{ip}:{port}/get-flag")

    flag = r.text()

    return flag


if __name__ == "__main__":
    port = 4512
    exploit(port=port)
```

‚úÖ The `exploit_manager` will **automatically provide the IPs** and **send the flags** to the server that handles communication with the flag checker.

> **Focus only on exploiting ‚Äî we'll take care of the rest!**

---

## üöÄ Running the Exploit

To run your exploit, follow these steps:

1. Navigate to the client directory:
   ```bash
   cd CookieFarm/client
   ```

2. Inside the `exploits` folder, **create your exploit** following the structure shown above.

3. Run the following command:
   ```bash
   make run ARGS="--exploit ./<exploit_name>.py -b <server_url> -p <server_password> -t <tick_time>"
   ```

### üîç Explanation of the parameters:

- `-e`, `--exploit`: the name of your exploit file.  
  **Important:** it must be located inside the `exploits/` folder!

- `-b`, `--base_url_server`: the URL (and port) of the CookieFarm server.

- `-p`, `--password`: the password to authenticate with the CookieFarm server.

- `-t`, `--tick`: the frequency (in seconds) to run the exploit and submit flags.

---

### üßπ Example Run

```bash
make run ARGS="--exploit ./my_exploit.py -b http://10.10.23.1:8080 -p Str0ng_p4ssw0rd -t 120"
```

This example executes the `my_exploit.py` script every 120 seconds, sending the obtained flags to the server at `http://10.10.23.1:8080`, authenticating with the password `Str0ng_p4ssw0rd`.

